# Install required packages if not already installed
install.packages(c("dplyr", "ggplot2", "tidyr", "testthat", "knitr", "rmarkdown"))
# For development installation, you might also need devtools
install.packages("devtools")
# Install the package from the local directory
devtools::install(".")
# Load the package
library(SurveyStat)
# Try installing again
devtools::install(".")
# Set working directory to SurveyStat folder
setwd("C:/Users/HP Computers/OneDrive/Desktop/publication/SurveyStat")
# Install the package (try this method)
install.packages(".", type = "source", repos = NULL)
# Load the package
library(SurveyStat)
# Try installing the package again
install.packages(".", type = "source", repos = NULL)
# If that works, load it
library(SurveyStat)
# Quick test
data_path <- system.file("data", "example_survey.csv", package = "SurveyStat")
survey_data <- read.csv(data_path)
# Fix the data path issue
data_path <- system.file("data", "example_survey.csv", package = "SurveyStat")
cat("Data path:", data_path, "\n")
cat("File exists:", file.exists(data_path), "\n")
# If system.file doesn't work, use direct path
if (!file.exists(data_path)) {
data_path <- "C:/Users/HP Computers/OneDrive/Desktop/publication/SurveyStat/data/example_survey.csv"
cat("Using direct path:", data_path, "\n")
}
# Load data
survey_data <- read.csv(data_path)
head(survey_data)
# Test the package functions
clean_data <- remove_duplicates(survey_data)
weighted_data <- apply_weights(clean_data, "Weight")
# Get results for your research paper screenshot
desc <- describe_survey(weighted_data, "Weight")
gender_freq <- frequency_table(weighted_data, "Gender", "Weight")
# Display clean results
cat("\n=== SURVEYSTAT PACKAGE RESULTS ===\n")
cat("Sample Size:", desc$Sample_Size, "\n")
cat("Number of Variables:", desc$Number_Variables, "\n\n")
cat("GENDER DISTRIBUTION (Weighted):\n")
print(gender_freq)
cat("\n=== PACKAGE SUCCESSFULLY LOADED AND FUNCTIONING ===\n")
# Create publication-ready output
cat("SURVEYSTAT PACKAGE - RESEARCH PAPER DEMONSTRATION\n")
cat("====================================================\n\n")
# Basic statistics
cat("Dataset Summary:\n")
cat("- Total Observations:", nrow(weighted_data), "\n")
cat("- Variables:", paste(names(weighted_data), collapse = ", "), "\n\n")
# Weighted statistics
weighted_mean_income <- weighted_mean(weighted_data, "Income", "Weight")
weighted_total_income <- weighted_total(weighted_data, "Income", "Weight")
cat("Weighted Income Statistics:\n")
cat("- Mean Income:", round(weighted_mean_income, 2), "\n")
cat("- Total Weighted Income:", round(weighted_total_income, 0), "\n\n")
# Cross-tabulation
cross_tab <- cross_tabulation(weighted_data, "Gender", "Education", "Weight")
cat("Chi-Square Test Results:\n")
cat("- Test Statistic:", round(cross_tab$Chi_Square_Test$Statistic, 4), "\n")
cat("- P-value:", format.pval(cross_tab$Chi_Square_Test$P_Value, digits = 4), "\n")
cat("- Interpretation: ", if(cross_tab$Chi_Square_Test$P_Value > 0.05) "No significant association" else "Significant association", "\n\n")
cat("âœ… SurveyStat Package Working Successfully!\n")
